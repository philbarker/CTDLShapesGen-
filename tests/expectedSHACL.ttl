@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix schema: <https://schema.org/> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<#Person> a sh:NodeShape ;
    sh:class schema:Person ;
    sh:description "A shape for tests" ;
    sh:name "Person shape" ;
    sh:or ( <#personContact-schema-email-opt> <#personContact-schema-address-opt> ) ;
    sh:property <#personAddress_value>,
        <#personContact-schema-address-opt_count>,
        <#personEmail_value>,
        <#personName_count>,
        <#personName_value> ;
    sh:targetClass schema:Person .

<#Address> a sh:NodeShape ;
    sh:class schema:PostalAddress ;
    sh:description "A shape for tests" ;
    sh:name "Address shape" ;
    sh:property <#addressContactOption_value> ;
    sh:targetObjectsOf schema:address .

<#addressContactOption_value> a sh:PropertyShape ;
    sh:in ( schema:HearingImpairedSupported schema:TollFree ) ;
    sh:name "Contact Option"@en ;
    sh:nodeKind sh:IRI ;
    sh:path schema:contactOption ;
    sh:severity sh:Violation .

<#personAddress_value> a sh:PropertyShape ;
    sh:name "Address"@en ;
    sh:node <#Address> ;
    sh:nodeKind sh:BlankNodeOrIRI ;
    sh:path schema:address ;
    sh:severity sh:Warning .

<#personContact-schema-address-opt> a sh:PropertyShape ;
    sh:minCount 1 ;
    sh:path schema:address ;
    sh:severity sh:Violation .

<#personContact-schema-address-opt_count> a sh:PropertyShape ;
    sh:minCount 1 ;
    sh:path schema:address,
        schema:email ;
    sh:severity sh:Violation .

<#personContact-schema-email-opt> a sh:PropertyShape ;
    sh:minCount 1 ;
    sh:path schema:email ;
    sh:severity sh:Violation .

<#personEmail_value> a sh:PropertyShape ;
    sh:datatype xsd:string ;
    sh:name "Email"@en ;
    sh:nodeKind sh:Literal ;
    sh:path schema:email ;
    sh:pattern "/.+@.+/" ;
    sh:severity sh:Warning .

<#personName_count> a sh:PropertyShape ;
    sh:minCount 1 ;
    sh:path schema:name ;
    sh:severity sh:Violation .

<#personName_value> a sh:PropertyShape ;
    sh:datatype xsd:string ;
    sh:minLength 2 ;
    sh:name "Name"@en,
        "Nombre"@es ;
    sh:nodeKind sh:Literal ;
    sh:path schema:name ;
    sh:severity sh:Violation .
